{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../config/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":36,"index":126}}],"key":"V94urzZZSfzzXHrNxWFShT8IuQo=","exportNames":["*"],"imports":1}},{"name":"../utils/secureStorage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":127},"end":{"line":3,"column":56,"index":183}}],"key":"VJtuFUlbX461VIgg9agIAV15XNA=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/Users/narayandc/practice/nepali-global-connect/frontend/src/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _configApi = require(_dependencyMap[1], \"../config/api\");\n  var _utilsSecureStorage = require(_dependencyMap[2], \"../utils/secureStorage\");\n  var secureStorage = _interopNamespace(_utilsSecureStorage);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        const token = await secureStorage.getItem('access_token');\n        if (token) {\n          const response = await _configApi.api.get('/auth/me');\n          setUser(response.data);\n        }\n      } catch (error) {\n        console.log('Not authenticated');\n        await secureStorage.deleteItem('access_token');\n        await secureStorage.deleteItem('refresh_token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await _configApi.api.post('/auth/login', {\n          email,\n          password\n        });\n        const {\n          access_token,\n          refresh_token\n        } = response.data;\n        await secureStorage.setItem('access_token', access_token);\n        await secureStorage.setItem('refresh_token', refresh_token);\n\n        // Get user info\n        const userResponse = await _configApi.api.get('/auth/me');\n        setUser(userResponse.data);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async (email, password, username) => {\n      try {\n        const response = await _configApi.api.post('/auth/register', {\n          email,\n          password,\n          username\n        });\n        const {\n          access_token,\n          refresh_token\n        } = response.data;\n        await secureStorage.setItem('access_token', access_token);\n        await secureStorage.setItem('refresh_token', refresh_token);\n\n        // Get user info\n        const userResponse = await _configApi.api.get('/auth/me');\n        setUser(userResponse.data);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      try {\n        await _configApi.api.post('/auth/logout');\n      } catch (error) {\n        console.log('Logout error:', error);\n      } finally {\n        await secureStorage.deleteItem('access_token');\n        await secureStorage.deleteItem('refresh_token');\n        setUser(null);\n      }\n    };\n    const refreshUser = async () => {\n      try {\n        const response = await _configApi.api.get('/auth/me');\n        setUser(response.data);\n      } catch (error) {\n        console.log('Failed to refresh user:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        login,\n        register,\n        logout,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":147,"map":[[23,2,24,0,"Object"],[23,8,24,0],[23,9,24,0,"defineProperty"],[23,23,24,0],[23,24,24,0,"exports"],[23,31,24,0],[24,4,24,0,"enumerable"],[24,14,24,0],[25,4,24,0,"get"],[25,7,24,0],[25,18,24,0,"get"],[25,19,24,0],[26,6,24,0],[26,13,24,0,"AuthProvider"],[26,25,24,0],[27,4,24,0],[28,2,24,0],[29,2,108,0,"Object"],[29,8,108,0],[29,9,108,0,"defineProperty"],[29,23,108,0],[29,24,108,0,"exports"],[29,31,108,0],[30,4,108,0,"enumerable"],[30,14,108,0],[31,4,108,0,"get"],[31,7,108,0],[31,18,108,0,"get"],[31,19,108,0],[32,6,108,0],[32,13,108,0,"useAuth"],[32,20,108,0],[33,4,108,0],[34,2,108,0],[35,2,1,0],[35,6,1,0,"_react"],[35,12,1,0],[35,15,1,0,"require"],[35,22,1,0],[35,23,1,0,"_dependencyMap"],[35,37,1,0],[36,2,2,0],[36,6,2,0,"_configApi"],[36,16,2,0],[36,19,2,0,"require"],[36,26,2,0],[36,27,2,0,"_dependencyMap"],[36,41,2,0],[37,2,3,0],[37,6,3,0,"_utilsSecureStorage"],[37,25,3,0],[37,28,3,0,"require"],[37,35,3,0],[37,36,3,0,"_dependencyMap"],[37,50,3,0],[38,2,3,0],[38,6,3,0,"secureStorage"],[38,19,3,0],[38,22,3,0,"_interopNamespace"],[38,39,3,0],[38,40,3,0,"_utilsSecureStorage"],[38,59,3,0],[39,2,3,56],[39,6,3,56,"_reactJsxDevRuntime"],[39,25,3,56],[39,28,3,56,"require"],[39,35,3,56],[39,36,3,56,"_dependencyMap"],[39,50,3,56],[40,2,22,0],[40,8,22,6,"AuthContext"],[40,19,22,17],[40,35,22,20],[40,39,22,20,"createContext"],[40,45,22,33],[40,46,22,33,"createContext"],[40,59,22,33],[40,61,22,63,"undefined"],[40,70,22,72],[40,71,22,73],[41,2,24,7],[41,8,24,13,"AuthProvider"],[41,20,24,25],[41,23,24,28,"AuthProvider"],[41,24,24,29],[42,4,24,31,"children"],[43,2,24,65],[43,3,24,66],[43,8,24,71],[44,4,25,2],[44,10,25,8],[44,11,25,9,"user"],[44,15,25,13],[44,17,25,15,"setUser"],[44,24,25,22],[44,25,25,23],[44,28,25,26],[44,32,25,26,"useState"],[44,38,25,34],[44,39,25,34,"useState"],[44,47,25,34],[44,49,25,48],[44,53,25,52],[44,54,25,53],[45,4,26,2],[45,10,26,8],[45,11,26,9,"loading"],[45,18,26,16],[45,20,26,18,"setLoading"],[45,30,26,28],[45,31,26,29],[45,34,26,32],[45,38,26,32,"useState"],[45,44,26,40],[45,45,26,40,"useState"],[45,53,26,40],[45,55,26,41],[45,59,26,45],[45,60,26,46],[46,4,28,2],[46,8,28,2,"useEffect"],[46,14,28,11],[46,15,28,11,"useEffect"],[46,24,28,11],[46,26,28,12],[46,32,28,18],[47,6,29,4,"checkAuth"],[47,15,29,13],[47,16,29,14],[47,17,29,15],[48,4,30,2],[48,5,30,3],[48,7,30,5],[48,9,30,7],[48,10,30,8],[49,4,32,2],[49,10,32,8,"checkAuth"],[49,19,32,17],[49,22,32,20],[49,28,32,20,"checkAuth"],[49,29,32,20],[49,34,32,32],[50,6,33,4],[50,10,33,8],[51,8,34,6],[51,14,34,12,"token"],[51,19,34,17],[51,22,34,20],[51,28,34,26,"secureStorage"],[51,41,34,39],[51,42,34,40,"getItem"],[51,49,34,47],[51,50,34,48],[51,64,34,62],[51,65,34,63],[52,8,35,6],[52,12,35,10,"token"],[52,17,35,15],[52,19,35,17],[53,10,36,8],[53,16,36,14,"response"],[53,24,36,22],[53,27,36,25],[53,33,36,31,"api"],[53,43,36,34],[53,44,36,34,"api"],[53,47,36,34],[53,48,36,35,"get"],[53,51,36,38],[53,52,36,39],[53,62,36,49],[53,63,36,50],[54,10,37,8,"setUser"],[54,17,37,15],[54,18,37,16,"response"],[54,26,37,24],[54,27,37,25,"data"],[54,31,37,29],[54,32,37,30],[55,8,38,6],[56,6,39,4],[56,7,39,5],[56,8,39,6],[56,15,39,13,"error"],[56,20,39,18],[56,22,39,20],[57,8,40,6,"console"],[57,15,40,13],[57,16,40,14,"log"],[57,19,40,17],[57,20,40,18],[57,39,40,37],[57,40,40,38],[58,8,41,6],[58,14,41,12,"secureStorage"],[58,27,41,25],[58,28,41,26,"deleteItem"],[58,38,41,36],[58,39,41,37],[58,53,41,51],[58,54,41,52],[59,8,42,6],[59,14,42,12,"secureStorage"],[59,27,42,25],[59,28,42,26,"deleteItem"],[59,38,42,36],[59,39,42,37],[59,54,42,52],[59,55,42,53],[60,6,43,4],[60,7,43,5],[60,16,43,14],[61,8,44,6,"setLoading"],[61,18,44,16],[61,19,44,17],[61,24,44,22],[61,25,44,23],[62,6,45,4],[63,4,46,2],[63,5,46,3],[64,4,48,2],[64,10,48,8,"login"],[64,15,48,13],[64,18,48,16],[64,24,48,16,"login"],[64,25,48,23,"email"],[64,30,48,36],[64,32,48,38,"password"],[64,40,48,54],[64,45,48,59],[65,6,49,4],[65,10,49,8],[66,8,50,6],[66,14,50,12,"response"],[66,22,50,20],[66,25,50,23],[66,31,50,29,"api"],[66,41,50,32],[66,42,50,32,"api"],[66,45,50,32],[66,46,50,33,"post"],[66,50,50,37],[66,51,50,38],[66,64,50,51],[66,66,50,53],[67,10,50,55,"email"],[67,15,50,60],[68,10,50,62,"password"],[69,8,50,71],[69,9,50,72],[69,10,50,73],[70,8,51,6],[70,14,51,12],[71,10,51,14,"access_token"],[71,22,51,26],[72,10,51,28,"refresh_token"],[73,8,51,42],[73,9,51,43],[73,12,51,46,"response"],[73,20,51,54],[73,21,51,55,"data"],[73,25,51,59],[74,8,53,6],[74,14,53,12,"secureStorage"],[74,27,53,25],[74,28,53,26,"setItem"],[74,35,53,33],[74,36,53,34],[74,50,53,48],[74,52,53,50,"access_token"],[74,64,53,62],[74,65,53,63],[75,8,54,6],[75,14,54,12,"secureStorage"],[75,27,54,25],[75,28,54,26,"setItem"],[75,35,54,33],[75,36,54,34],[75,51,54,49],[75,53,54,51,"refresh_token"],[75,66,54,64],[75,67,54,65],[77,8,56,6],[78,8,57,6],[78,14,57,12,"userResponse"],[78,26,57,24],[78,29,57,27],[78,35,57,33,"api"],[78,45,57,36],[78,46,57,36,"api"],[78,49,57,36],[78,50,57,37,"get"],[78,53,57,40],[78,54,57,41],[78,64,57,51],[78,65,57,52],[79,8,58,6,"setUser"],[79,15,58,13],[79,16,58,14,"userResponse"],[79,28,58,26],[79,29,58,27,"data"],[79,33,58,31],[79,34,58,32],[80,6,59,4],[80,7,59,5],[80,8,59,6],[80,15,59,13,"error"],[80,20,59,23],[80,22,59,25],[81,8,60,6],[81,14,60,12],[81,18,60,16,"Error"],[81,23,60,21],[81,24,60,22,"error"],[81,29,60,27],[81,30,60,28,"response"],[81,38,60,36],[81,40,60,38,"data"],[81,44,60,42],[81,46,60,44,"detail"],[81,52,60,50],[81,56,60,54],[81,70,60,68],[81,71,60,69],[82,6,61,4],[83,4,62,2],[83,5,62,3],[84,4,64,2],[84,10,64,8,"register"],[84,18,64,16],[84,21,64,19],[84,27,64,19,"register"],[84,28,64,26,"email"],[84,33,64,39],[84,35,64,41,"password"],[84,43,64,57],[84,45,64,59,"username"],[84,53,64,75],[84,58,64,80],[85,6,65,4],[85,10,65,8],[86,8,66,6],[86,14,66,12,"response"],[86,22,66,20],[86,25,66,23],[86,31,66,29,"api"],[86,41,66,32],[86,42,66,32,"api"],[86,45,66,32],[86,46,66,33,"post"],[86,50,66,37],[86,51,66,38],[86,67,66,54],[86,69,66,56],[87,10,66,58,"email"],[87,15,66,63],[88,10,66,65,"password"],[88,18,66,73],[89,10,66,75,"username"],[90,8,66,84],[90,9,66,85],[90,10,66,86],[91,8,67,6],[91,14,67,12],[92,10,67,14,"access_token"],[92,22,67,26],[93,10,67,28,"refresh_token"],[94,8,67,42],[94,9,67,43],[94,12,67,46,"response"],[94,20,67,54],[94,21,67,55,"data"],[94,25,67,59],[95,8,69,6],[95,14,69,12,"secureStorage"],[95,27,69,25],[95,28,69,26,"setItem"],[95,35,69,33],[95,36,69,34],[95,50,69,48],[95,52,69,50,"access_token"],[95,64,69,62],[95,65,69,63],[96,8,70,6],[96,14,70,12,"secureStorage"],[96,27,70,25],[96,28,70,26,"setItem"],[96,35,70,33],[96,36,70,34],[96,51,70,49],[96,53,70,51,"refresh_token"],[96,66,70,64],[96,67,70,65],[98,8,72,6],[99,8,73,6],[99,14,73,12,"userResponse"],[99,26,73,24],[99,29,73,27],[99,35,73,33,"api"],[99,45,73,36],[99,46,73,36,"api"],[99,49,73,36],[99,50,73,37,"get"],[99,53,73,40],[99,54,73,41],[99,64,73,51],[99,65,73,52],[100,8,74,6,"setUser"],[100,15,74,13],[100,16,74,14,"userResponse"],[100,28,74,26],[100,29,74,27,"data"],[100,33,74,31],[100,34,74,32],[101,6,75,4],[101,7,75,5],[101,8,75,6],[101,15,75,13,"error"],[101,20,75,23],[101,22,75,25],[102,8,76,6],[102,14,76,12],[102,18,76,16,"Error"],[102,23,76,21],[102,24,76,22,"error"],[102,29,76,27],[102,30,76,28,"response"],[102,38,76,36],[102,40,76,38,"data"],[102,44,76,42],[102,46,76,44,"detail"],[102,52,76,50],[102,56,76,54],[102,77,76,75],[102,78,76,76],[103,6,77,4],[104,4,78,2],[104,5,78,3],[105,4,80,2],[105,10,80,8,"logout"],[105,16,80,14],[105,19,80,17],[105,25,80,17,"logout"],[105,26,80,17],[105,31,80,29],[106,6,81,4],[106,10,81,8],[107,8,82,6],[107,14,82,12,"api"],[107,24,82,15],[107,25,82,15,"api"],[107,28,82,15],[107,29,82,16,"post"],[107,33,82,20],[107,34,82,21],[107,48,82,35],[107,49,82,36],[108,6,83,4],[108,7,83,5],[108,8,83,6],[108,15,83,13,"error"],[108,20,83,18],[108,22,83,20],[109,8,84,6,"console"],[109,15,84,13],[109,16,84,14,"log"],[109,19,84,17],[109,20,84,18],[109,35,84,33],[109,37,84,35,"error"],[109,42,84,40],[109,43,84,41],[110,6,85,4],[110,7,85,5],[110,16,85,14],[111,8,86,6],[111,14,86,12,"secureStorage"],[111,27,86,25],[111,28,86,26,"deleteItem"],[111,38,86,36],[111,39,86,37],[111,53,86,51],[111,54,86,52],[112,8,87,6],[112,14,87,12,"secureStorage"],[112,27,87,25],[112,28,87,26,"deleteItem"],[112,38,87,36],[112,39,87,37],[112,54,87,52],[112,55,87,53],[113,8,88,6,"setUser"],[113,15,88,13],[113,16,88,14],[113,20,88,18],[113,21,88,19],[114,6,89,4],[115,4,90,2],[115,5,90,3],[116,4,92,2],[116,10,92,8,"refreshUser"],[116,21,92,19],[116,24,92,22],[116,30,92,22,"refreshUser"],[116,31,92,22],[116,36,92,34],[117,6,93,4],[117,10,93,8],[118,8,94,6],[118,14,94,12,"response"],[118,22,94,20],[118,25,94,23],[118,31,94,29,"api"],[118,41,94,32],[118,42,94,32,"api"],[118,45,94,32],[118,46,94,33,"get"],[118,49,94,36],[118,50,94,37],[118,60,94,47],[118,61,94,48],[119,8,95,6,"setUser"],[119,15,95,13],[119,16,95,14,"response"],[119,24,95,22],[119,25,95,23,"data"],[119,29,95,27],[119,30,95,28],[120,6,96,4],[120,7,96,5],[120,8,96,6],[120,15,96,13,"error"],[120,20,96,18],[120,22,96,20],[121,8,97,6,"console"],[121,15,97,13],[121,16,97,14,"log"],[121,19,97,17],[121,20,97,18],[121,45,97,43],[121,47,97,45,"error"],[121,52,97,50],[121,53,97,51],[122,6,98,4],[123,4,99,2],[123,5,99,3],[124,4,101,2],[124,24,102,4],[124,28,102,4,"_reactJsxDevRuntime"],[124,47,102,4],[124,48,102,4,"jsxDEV"],[124,54,102,4],[124,56,102,5,"AuthContext"],[124,67,102,16],[124,68,102,17,"Provider"],[124,76,102,25],[125,6,102,26,"value"],[125,11,102,31],[125,13,102,33],[126,8,102,35,"user"],[126,12,102,39],[127,8,102,41,"loading"],[127,15,102,48],[128,8,102,50,"login"],[128,13,102,55],[129,8,102,57,"register"],[129,16,102,65],[130,8,102,67,"logout"],[130,14,102,73],[131,8,102,75,"refreshUser"],[132,6,102,87],[132,7,102,89],[133,6,102,89,"children"],[133,14,102,89],[133,16,103,7,"children"],[134,4,103,15],[135,6,103,15,"fileName"],[135,14,103,15],[135,16,103,15,"_jsxFileName"],[135,28,103,15],[136,6,103,15,"lineNumber"],[136,16,103,15],[137,6,103,15,"columnNumber"],[137,18,103,15],[138,4,103,15],[138,11,104,26],[138,12,104,27],[139,2,106,0],[139,3,106,1],[140,2,108,7],[140,8,108,13,"useAuth"],[140,15,108,20],[140,18,108,23,"useAuth"],[140,19,108,23],[140,24,108,29],[141,4,109,2],[141,10,109,8,"context"],[141,17,109,15],[141,20,109,18],[141,24,109,18,"useContext"],[141,30,109,28],[141,31,109,28,"useContext"],[141,41,109,28],[141,43,109,29,"AuthContext"],[141,54,109,40],[141,55,109,41],[142,4,110,2],[142,8,110,6,"context"],[142,15,110,13],[142,20,110,18,"undefined"],[142,29,110,27],[142,31,110,29],[143,6,111,4],[143,12,111,10],[143,16,111,14,"Error"],[143,21,111,19],[143,22,111,20],[143,67,111,65],[143,68,111,66],[144,4,112,2],[145,4,113,2],[145,11,113,9,"context"],[145,18,113,16],[146,2,114,0],[146,3,114,1],[147,0,114,2],[147,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","login","register","logout","refreshUser","useAuth"],"mappings":"AAA;4BCuB;YCI;GDE;oBEE;GFc;gBGE;GHc;mBIE;GJc;iBKE;GLU;sBME;GNO;CDO;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}