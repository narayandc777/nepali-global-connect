{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":27},"end":{"line":2,"column":39,"index":66}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"../utils/secureStorage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":67},"end":{"line":3,"column":56,"index":123}}],"key":"VJtuFUlbX461VIgg9agIAV15XNA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"api\", {\n    enumerable: true,\n    get: function () {\n      return api;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _expoVirtualEnv = require(_dependencyMap[1], \"expo/virtual/env\");\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _expoConstants = require(_dependencyMap[3], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _utilsSecureStorage = require(_dependencyMap[4], \"../utils/secureStorage\");\n  var secureStorage = _interopNamespace(_utilsSecureStorage);\n  var API_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n  var api = axios.default.create({\n    baseURL: `${API_URL}/api`,\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n\n  // Request interceptor to add token\n  api.interceptors.request.use(/*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator.default)(function* (config) {\n      var token = yield secureStorage.getItem('access_token');\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n      return config;\n    });\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(), error => {\n    return Promise.reject(error);\n  });\n\n  // Response interceptor to handle token refresh\n  api.interceptors.response.use(response => response, /*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator.default)(function* (error) {\n      var originalRequest = error.config;\n      if (error.response?.status === 401 && !originalRequest._retry) {\n        originalRequest._retry = true;\n        try {\n          var refreshToken = yield secureStorage.getItem('refresh_token');\n          if (refreshToken) {\n            var response = yield axios.default.post(`${API_URL}/api/auth/refresh`, {\n              refresh_token: refreshToken\n            });\n            var _response$data = response.data,\n              access_token = _response$data.access_token,\n              newRefreshToken = _response$data.refresh_token;\n            yield secureStorage.setItem('access_token', access_token);\n            yield secureStorage.setItem('refresh_token', newRefreshToken);\n            originalRequest.headers.Authorization = `Bearer ${access_token}`;\n            return api(originalRequest);\n          }\n        } catch (refreshError) {\n          // Refresh failed, logout user\n          yield secureStorage.deleteItem('access_token');\n          yield secureStorage.deleteItem('refresh_token');\n          return Promise.reject(refreshError);\n        }\n      }\n      return Promise.reject(error);\n    });\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }());\n  var _default = api;\n});","lineCount":106,"map":[[27,2,63,0,"Object"],[27,8,63,0],[27,9,63,0,"defineProperty"],[27,23,63,0],[27,24,63,0,"exports"],[27,31,63,0],[28,4,63,0,"enumerable"],[28,14,63,0],[29,4,63,0,"get"],[29,7,63,0],[29,18,63,0,"get"],[29,19,63,0],[30,6,63,0],[30,13,63,0,"_default"],[30,21,63,0],[31,4,63,0],[32,2,63,0],[33,2,7,0,"Object"],[33,8,7,0],[33,9,7,0,"defineProperty"],[33,23,7,0],[33,24,7,0,"exports"],[33,31,7,0],[34,4,7,0,"enumerable"],[34,14,7,0],[35,4,7,0,"get"],[35,7,7,0],[35,18,7,0,"get"],[35,19,7,0],[36,6,7,0],[36,13,7,0,"api"],[36,16,7,0],[37,4,7,0],[38,2,7,0],[39,2,12,3],[39,6,12,3,"_babelRuntimeHelpersAsyncToGenerator"],[39,42,12,3],[39,45,12,3,"require"],[39,52,12,3],[39,53,12,3,"_dependencyMap"],[39,67,12,3],[40,2,12,3],[40,6,12,3,"_asyncToGenerator"],[40,23,12,3],[40,26,12,3,"_interopDefault"],[40,41,12,3],[40,42,12,3,"_babelRuntimeHelpersAsyncToGenerator"],[40,78,12,3],[41,2,12,3],[41,6,12,3,"_expoVirtualEnv"],[41,21,12,3],[41,24,12,3,"require"],[41,31,12,3],[41,32,12,3,"_dependencyMap"],[41,46,12,3],[42,2,1,0],[42,6,1,0,"_axios"],[42,12,1,0],[42,15,1,0,"require"],[42,22,1,0],[42,23,1,0,"_dependencyMap"],[42,37,1,0],[43,2,1,0],[43,6,1,0,"axios"],[43,11,1,0],[43,14,1,0,"_interopDefault"],[43,29,1,0],[43,30,1,0,"_axios"],[43,36,1,0],[44,2,2,0],[44,6,2,0,"_expoConstants"],[44,20,2,0],[44,23,2,0,"require"],[44,30,2,0],[44,31,2,0,"_dependencyMap"],[44,45,2,0],[45,2,2,0],[45,6,2,0,"Constants"],[45,15,2,0],[45,18,2,0,"_interopDefault"],[45,33,2,0],[45,34,2,0,"_expoConstants"],[45,48,2,0],[46,2,3,0],[46,6,3,0,"_utilsSecureStorage"],[46,25,3,0],[46,28,3,0,"require"],[46,35,3,0],[46,36,3,0,"_dependencyMap"],[46,50,3,0],[47,2,3,0],[47,6,3,0,"secureStorage"],[47,19,3,0],[47,22,3,0,"_interopNamespace"],[47,39,3,0],[47,40,3,0,"_utilsSecureStorage"],[47,59,3,0],[48,2,5,0],[48,6,5,6,"API_URL"],[48,13,5,13],[48,16,5,16,"Constants"],[48,25,5,25],[48,26,5,25,"default"],[48,33,5,25],[48,34,5,26,"expoConfig"],[48,44,5,36],[48,46,5,38,"extra"],[48,51,5,43],[48,53,5,45,"EXPO_PUBLIC_BACKEND_URL"],[48,76,5,68],[48,80,5,68,"_expoVirtualEnv"],[48,95,5,68],[48,96,5,68,"env"],[48,99,5,68],[48,100,5,68,"EXPO_PUBLIC_BACKEND_URL"],[48,123,5,107],[48,127,5,111],[48,129,5,113],[49,2,7,7],[49,6,7,13,"api"],[49,9,7,16],[49,12,7,19,"axios"],[49,17,7,24],[49,18,7,24,"default"],[49,25,7,24],[49,26,7,25,"create"],[49,32,7,31],[49,33,7,32],[50,4,8,2,"baseURL"],[50,11,8,9],[50,13,8,11],[50,16,8,14,"API_URL"],[50,23,8,21],[50,29,8,27],[51,4,9,2,"headers"],[51,11,9,9],[51,13,9,11],[52,6,10,4],[52,20,10,18],[52,22,10,20],[53,4,11,2],[54,2,12,0],[54,3,12,1],[54,4,12,2],[56,2,14,0],[57,2,15,0,"api"],[57,5,15,3],[57,6,15,4,"interceptors"],[57,18,15,16],[57,19,15,17,"request"],[57,26,15,24],[57,27,15,25,"use"],[57,30,15,28],[58,4,15,28],[58,8,15,28,"_ref"],[58,12,15,28],[58,19,15,28,"_asyncToGenerator"],[58,36,15,28],[58,37,15,28,"default"],[58,44,15,28],[58,46,16,2],[58,57,16,9,"config"],[58,63,16,15],[58,65,16,20],[59,6,17,4],[59,10,17,10,"token"],[59,15,17,15],[59,24,17,24,"secureStorage"],[59,37,17,37],[59,38,17,38,"getItem"],[59,45,17,45],[59,46,17,46],[59,60,17,60],[59,61,17,61],[60,6,18,4],[60,10,18,8,"token"],[60,15,18,13],[60,17,18,15],[61,8,19,6,"config"],[61,14,19,12],[61,15,19,13,"headers"],[61,22,19,20],[61,23,19,21,"Authorization"],[61,36,19,34],[61,39,19,37],[61,49,19,47,"token"],[61,54,19,52],[61,56,19,54],[62,6,20,4],[63,6,21,4],[63,13,21,11,"config"],[63,19,21,17],[64,4,22,2],[64,5,22,3],[65,4,22,3],[65,21,22,3,"_x"],[65,23,22,3],[66,6,22,3],[66,13,22,3,"_ref"],[66,17,22,3],[66,18,22,3,"apply"],[66,23,22,3],[66,30,22,3,"arguments"],[66,39,22,3],[67,4,22,3],[68,2,22,3],[68,7,23,3,"error"],[68,12,23,8],[68,16,23,13],[69,4,24,4],[69,11,24,11,"Promise"],[69,18,24,18],[69,19,24,19,"reject"],[69,25,24,25],[69,26,24,26,"error"],[69,31,24,31],[69,32,24,32],[70,2,25,2],[70,3,26,0],[70,4,26,1],[72,2,28,0],[73,2,29,0,"api"],[73,5,29,3],[73,6,29,4,"interceptors"],[73,18,29,16],[73,19,29,17,"response"],[73,27,29,25],[73,28,29,26,"use"],[73,31,29,29],[73,32,30,3,"response"],[73,40,30,11],[73,44,30,16,"response"],[73,52,30,24],[74,4,30,24],[74,8,30,24,"_ref2"],[74,13,30,24],[74,20,30,24,"_asyncToGenerator"],[74,37,30,24],[74,38,30,24,"default"],[74,45,30,24],[74,47,31,2],[74,58,31,9,"error"],[74,63,31,14],[74,65,31,19],[75,6,32,4],[75,10,32,10,"originalRequest"],[75,25,32,25],[75,28,32,28,"error"],[75,33,32,33],[75,34,32,34,"config"],[75,40,32,40],[76,6,34,4],[76,10,34,8,"error"],[76,15,34,13],[76,16,34,14,"response"],[76,24,34,22],[76,26,34,24,"status"],[76,32,34,30],[76,37,34,35],[76,40,34,38],[76,44,34,42],[76,45,34,43,"originalRequest"],[76,60,34,58],[76,61,34,59,"_retry"],[76,67,34,65],[76,69,34,67],[77,8,35,6,"originalRequest"],[77,23,35,21],[77,24,35,22,"_retry"],[77,30,35,28],[77,33,35,31],[77,37,35,35],[78,8,37,6],[78,12,37,10],[79,10,38,8],[79,14,38,14,"refreshToken"],[79,26,38,26],[79,35,38,35,"secureStorage"],[79,48,38,48],[79,49,38,49,"getItem"],[79,56,38,56],[79,57,38,57],[79,72,38,72],[79,73,38,73],[80,10,39,8],[80,14,39,12,"refreshToken"],[80,26,39,24],[80,28,39,26],[81,12,40,10],[81,16,40,16,"response"],[81,24,40,24],[81,33,40,33,"axios"],[81,38,40,38],[81,39,40,38,"default"],[81,46,40,38],[81,47,40,39,"post"],[81,51,40,43],[81,52,40,44],[81,55,40,47,"API_URL"],[81,62,40,54],[81,81,40,73],[81,83,40,75],[82,14,41,12,"refresh_token"],[82,27,41,25],[82,29,41,27,"refreshToken"],[83,12,42,10],[83,13,42,11],[83,14,42,12],[84,12,44,10],[84,16,44,10,"_response$data"],[84,30,44,10],[84,33,44,67,"response"],[84,41,44,75],[84,42,44,76,"data"],[84,46,44,80],[85,14,44,18,"access_token"],[85,26,44,30],[85,29,44,30,"_response$data"],[85,43,44,30],[85,44,44,18,"access_token"],[85,56,44,30],[86,14,44,47,"newRefreshToken"],[86,29,44,62],[86,32,44,62,"_response$data"],[86,46,44,62],[86,47,44,32,"refresh_token"],[86,60,44,45],[87,12,45,10],[87,18,45,16,"secureStorage"],[87,31,45,29],[87,32,45,30,"setItem"],[87,39,45,37],[87,40,45,38],[87,54,45,52],[87,56,45,54,"access_token"],[87,68,45,66],[87,69,45,67],[88,12,46,10],[88,18,46,16,"secureStorage"],[88,31,46,29],[88,32,46,30,"setItem"],[88,39,46,37],[88,40,46,38],[88,55,46,53],[88,57,46,55,"newRefreshToken"],[88,72,46,70],[88,73,46,71],[89,12,48,10,"originalRequest"],[89,27,48,25],[89,28,48,26,"headers"],[89,35,48,33],[89,36,48,34,"Authorization"],[89,49,48,47],[89,52,48,50],[89,62,48,60,"access_token"],[89,74,48,72],[89,76,48,74],[90,12,49,10],[90,19,49,17,"api"],[90,22,49,20],[90,23,49,21,"originalRequest"],[90,38,49,36],[90,39,49,37],[91,10,50,8],[92,8,51,6],[92,9,51,7],[92,10,51,8],[92,17,51,15,"refreshError"],[92,29,51,27],[92,31,51,29],[93,10,52,8],[94,10,53,8],[94,16,53,14,"secureStorage"],[94,29,53,27],[94,30,53,28,"deleteItem"],[94,40,53,38],[94,41,53,39],[94,55,53,53],[94,56,53,54],[95,10,54,8],[95,16,54,14,"secureStorage"],[95,29,54,27],[95,30,54,28,"deleteItem"],[95,40,54,38],[95,41,54,39],[95,56,54,54],[95,57,54,55],[96,10,55,8],[96,17,55,15,"Promise"],[96,24,55,22],[96,25,55,23,"reject"],[96,31,55,29],[96,32,55,30,"refreshError"],[96,44,55,42],[96,45,55,43],[97,8,56,6],[98,6,57,4],[99,6,59,4],[99,13,59,11,"Promise"],[99,20,59,18],[99,21,59,19,"reject"],[99,27,59,25],[99,28,59,26,"error"],[99,33,59,31],[99,34,59,32],[100,4,60,2],[100,5,60,3],[101,4,60,3],[101,21,60,3,"_x2"],[101,24,60,3],[102,6,60,3],[102,13,60,3,"_ref2"],[102,18,60,3],[102,19,60,3,"apply"],[102,24,60,3],[102,31,60,3,"arguments"],[102,40,60,3],[103,4,60,3],[104,2,60,3],[104,5,61,0],[104,6,61,1],[105,2,63,0],[105,6,63,0,"_default"],[105,14,63,0],[105,17,63,15,"api"],[105,20,63,18],[106,0,63,19],[106,3]],"functionMap":{"names":["<global>","interceptors.request.use$argument_0","interceptors.request.use$argument_1","interceptors.response.use$argument_0","interceptors.response.use$argument_1"],"mappings":"AAA;ECe;GDM;EEC;GFE;EGK,sBH;EIC;GJ6B"},"hasCjsExports":false},"type":"js/module"}]}