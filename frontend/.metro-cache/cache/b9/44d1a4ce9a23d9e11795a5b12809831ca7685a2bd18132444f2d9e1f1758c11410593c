{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../config/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":36,"index":126}}],"key":"V94urzZZSfzzXHrNxWFShT8IuQo=","exportNames":["*"],"imports":1}},{"name":"../utils/secureStorage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":127},"end":{"line":3,"column":56,"index":183}}],"key":"VJtuFUlbX461VIgg9agIAV15XNA=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/Users/narayandc/practice/nepali-global-connect/frontend/src/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _configApi = require(_dependencyMap[1], \"../config/api\");\n  var _utilsSecureStorage = require(_dependencyMap[2], \"../utils/secureStorage\");\n  var secureStorage = _interopNamespace(_utilsSecureStorage);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        const token = await secureStorage.getItem('access_token');\n        if (token) {\n          const response = await _configApi.api.get('/auth/me');\n          setUser(response.data);\n        }\n      } catch (error) {\n        console.log('Not authenticated');\n        await secureStorage.deleteItem('access_token');\n        await secureStorage.deleteItem('refresh_token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        // const response = await api.post('/auth/login', { email, password });\n        const response = {\n          data: {\n            access_token: 'test',\n            refresh_token: 'test'\n          }\n        };\n        const {\n          access_token,\n          refresh_token\n        } = response.data;\n        await secureStorage.setItem('access_token', access_token);\n        await secureStorage.setItem('refresh_token', refresh_token);\n\n        // Get user info\n        // const userResponse = await api.get('/auth/me');\n        // setUser(userResponse.data);\n\n        setUser({\n          id: 'string',\n          email: 'string',\n          username: 'string',\n          created_at: 'string'\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async (email, password, username) => {\n      try {\n        const response = await _configApi.api.post('/auth/register', {\n          email,\n          password,\n          username\n        });\n        const {\n          access_token,\n          refresh_token\n        } = response.data;\n        await secureStorage.setItem('access_token', access_token);\n        await secureStorage.setItem('refresh_token', refresh_token);\n\n        // Get user info\n        const userResponse = await _configApi.api.get('/auth/me');\n        setUser(userResponse.data);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      try {\n        await _configApi.api.post('/auth/logout');\n      } catch (error) {\n        console.log('Logout error:', error);\n      } finally {\n        await secureStorage.deleteItem('access_token');\n        await secureStorage.deleteItem('refresh_token');\n        setUser(null);\n      }\n    };\n    const refreshUser = async () => {\n      try {\n        const response = await _configApi.api.get('/auth/me');\n        setUser(response.data);\n      } catch (error) {\n        console.log('Failed to refresh user:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        login,\n        register,\n        logout,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"NiO5z6JIqzX62LS5UWDgIqbZYyY=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":166,"map":[[25,2,24,0,"Object"],[25,8,24,0],[25,9,24,0,"defineProperty"],[25,23,24,0],[25,24,24,0,"exports"],[25,31,24,0],[26,4,24,0,"enumerable"],[26,14,24,0],[27,4,24,0,"get"],[27,7,24,0],[27,18,24,0,"get"],[27,19,24,0],[28,6,24,0],[28,13,24,0,"AuthProvider"],[28,25,24,0],[29,4,24,0],[30,2,24,0],[31,2,122,0,"Object"],[31,8,122,0],[31,9,122,0,"defineProperty"],[31,23,122,0],[31,24,122,0,"exports"],[31,31,122,0],[32,4,122,0,"enumerable"],[32,14,122,0],[33,4,122,0,"get"],[33,7,122,0],[33,18,122,0,"get"],[33,19,122,0],[34,6,122,0],[34,13,122,0,"useAuth"],[34,20,122,0],[35,4,122,0],[36,2,122,0],[37,2,1,0],[37,6,1,0,"_react"],[37,12,1,0],[37,15,1,0,"require"],[37,22,1,0],[37,23,1,0,"_dependencyMap"],[37,37,1,0],[38,2,2,0],[38,6,2,0,"_configApi"],[38,16,2,0],[38,19,2,0,"require"],[38,26,2,0],[38,27,2,0,"_dependencyMap"],[38,41,2,0],[39,2,3,0],[39,6,3,0,"_utilsSecureStorage"],[39,25,3,0],[39,28,3,0,"require"],[39,35,3,0],[39,36,3,0,"_dependencyMap"],[39,50,3,0],[40,2,3,0],[40,6,3,0,"secureStorage"],[40,19,3,0],[40,22,3,0,"_interopNamespace"],[40,39,3,0],[40,40,3,0,"_utilsSecureStorage"],[40,59,3,0],[41,2,3,56],[41,6,3,56,"_reactJsxDevRuntime"],[41,25,3,56],[41,28,3,56,"require"],[41,35,3,56],[41,36,3,56,"_dependencyMap"],[41,50,3,56],[42,2,22,0],[42,8,22,6,"AuthContext"],[42,19,22,17],[42,35,22,20],[42,39,22,20,"createContext"],[42,45,22,33],[42,46,22,33,"createContext"],[42,59,22,33],[42,61,22,63,"undefined"],[42,70,22,72],[42,71,22,73],[43,2,24,7],[43,8,24,13,"AuthProvider"],[43,20,24,25],[43,23,24,28,"AuthProvider"],[43,24,24,29],[44,4,24,31,"children"],[45,2,24,65],[45,3,24,66],[45,8,24,71],[46,4,24,71,"_s"],[46,6,24,71],[47,4,25,2],[47,10,25,8],[47,11,25,9,"user"],[47,15,25,13],[47,17,25,15,"setUser"],[47,24,25,22],[47,25,25,23],[47,28,25,26],[47,32,25,26,"useState"],[47,38,25,34],[47,39,25,34,"useState"],[47,47,25,34],[47,49,25,48],[47,53,25,52],[47,54,25,53],[48,4,26,2],[48,10,26,8],[48,11,26,9,"loading"],[48,18,26,16],[48,20,26,18,"setLoading"],[48,30,26,28],[48,31,26,29],[48,34,26,32],[48,38,26,32,"useState"],[48,44,26,40],[48,45,26,40,"useState"],[48,53,26,40],[48,55,26,41],[48,59,26,45],[48,60,26,46],[49,4,28,2],[49,8,28,2,"useEffect"],[49,14,28,11],[49,15,28,11,"useEffect"],[49,24,28,11],[49,26,28,12],[49,32,28,18],[50,6,29,4,"checkAuth"],[50,15,29,13],[50,16,29,14],[50,17,29,15],[51,4,30,2],[51,5,30,3],[51,7,30,5],[51,9,30,7],[51,10,30,8],[52,4,32,2],[52,10,32,8,"checkAuth"],[52,19,32,17],[52,22,32,20],[52,28,32,20,"checkAuth"],[52,29,32,20],[52,34,32,32],[53,6,33,4],[53,10,33,8],[54,8,34,6],[54,14,34,12,"token"],[54,19,34,17],[54,22,34,20],[54,28,34,26,"secureStorage"],[54,41,34,39],[54,42,34,40,"getItem"],[54,49,34,47],[54,50,34,48],[54,64,34,62],[54,65,34,63],[55,8,35,6],[55,12,35,10,"token"],[55,17,35,15],[55,19,35,17],[56,10,36,8],[56,16,36,14,"response"],[56,24,36,22],[56,27,36,25],[56,33,36,31,"api"],[56,43,36,34],[56,44,36,34,"api"],[56,47,36,34],[56,48,36,35,"get"],[56,51,36,38],[56,52,36,39],[56,62,36,49],[56,63,36,50],[57,10,37,8,"setUser"],[57,17,37,15],[57,18,37,16,"response"],[57,26,37,24],[57,27,37,25,"data"],[57,31,37,29],[57,32,37,30],[58,8,38,6],[59,6,39,4],[59,7,39,5],[59,8,39,6],[59,15,39,13,"error"],[59,20,39,18],[59,22,39,20],[60,8,40,6,"console"],[60,15,40,13],[60,16,40,14,"log"],[60,19,40,17],[60,20,40,18],[60,39,40,37],[60,40,40,38],[61,8,41,6],[61,14,41,12,"secureStorage"],[61,27,41,25],[61,28,41,26,"deleteItem"],[61,38,41,36],[61,39,41,37],[61,53,41,51],[61,54,41,52],[62,8,42,6],[62,14,42,12,"secureStorage"],[62,27,42,25],[62,28,42,26,"deleteItem"],[62,38,42,36],[62,39,42,37],[62,54,42,52],[62,55,42,53],[63,6,43,4],[63,7,43,5],[63,16,43,14],[64,8,44,6,"setLoading"],[64,18,44,16],[64,19,44,17],[64,24,44,22],[64,25,44,23],[65,6,45,4],[66,4,46,2],[66,5,46,3],[67,4,48,2],[67,10,48,8,"login"],[67,15,48,13],[67,18,48,16],[67,24,48,16,"login"],[67,25,48,23,"email"],[67,30,48,36],[67,32,48,38,"password"],[67,40,48,54],[67,45,48,59],[68,6,49,4],[68,10,49,8],[69,8,50,6],[70,8,51,6],[70,14,51,12,"response"],[70,22,51,20],[70,25,51,21],[71,10,52,8,"data"],[71,14,52,12],[71,16,52,13],[72,12,53,10,"access_token"],[72,24,53,22],[72,26,53,23],[72,32,53,29],[73,12,54,10,"refresh_token"],[73,25,54,23],[73,27,54,24],[74,10,55,8],[75,8,56,6],[75,9,56,7],[76,8,57,6],[76,14,57,12],[77,10,57,14,"access_token"],[77,22,57,26],[78,10,57,28,"refresh_token"],[79,8,57,42],[79,9,57,43],[79,12,57,46,"response"],[79,20,57,54],[79,21,57,55,"data"],[79,25,57,59],[80,8,59,6],[80,14,59,12,"secureStorage"],[80,27,59,25],[80,28,59,26,"setItem"],[80,35,59,33],[80,36,59,34],[80,50,59,48],[80,52,59,50,"access_token"],[80,64,59,62],[80,65,59,63],[81,8,60,6],[81,14,60,12,"secureStorage"],[81,27,60,25],[81,28,60,26,"setItem"],[81,35,60,33],[81,36,60,34],[81,51,60,49],[81,53,60,51,"refresh_token"],[81,66,60,64],[81,67,60,65],[83,8,62,6],[84,8,63,6],[85,8,64,6],[87,8,66,6,"setUser"],[87,15,66,13],[87,16,66,14],[88,10,67,8,"id"],[88,12,67,10],[88,14,67,12],[88,22,67,20],[89,10,68,8,"email"],[89,15,68,13],[89,17,68,15],[89,25,68,23],[90,10,69,8,"username"],[90,18,69,16],[90,20,69,18],[90,28,69,26],[91,10,70,8,"created_at"],[91,20,70,18],[91,22,70,20],[92,8,72,6],[92,9,72,7],[92,10,72,8],[93,6,73,4],[93,7,73,5],[93,8,73,6],[93,15,73,13,"error"],[93,20,73,23],[93,22,73,25],[94,8,74,6],[94,14,74,12],[94,18,74,16,"Error"],[94,23,74,21],[94,24,74,22,"error"],[94,29,74,27],[94,30,74,28,"response"],[94,38,74,36],[94,40,74,38,"data"],[94,44,74,42],[94,46,74,44,"detail"],[94,52,74,50],[94,56,74,54],[94,70,74,68],[94,71,74,69],[95,6,75,4],[96,4,76,2],[96,5,76,3],[97,4,78,2],[97,10,78,8,"register"],[97,18,78,16],[97,21,78,19],[97,27,78,19,"register"],[97,28,78,26,"email"],[97,33,78,39],[97,35,78,41,"password"],[97,43,78,57],[97,45,78,59,"username"],[97,53,78,75],[97,58,78,80],[98,6,79,4],[98,10,79,8],[99,8,80,6],[99,14,80,12,"response"],[99,22,80,20],[99,25,80,23],[99,31,80,29,"api"],[99,41,80,32],[99,42,80,32,"api"],[99,45,80,32],[99,46,80,33,"post"],[99,50,80,37],[99,51,80,38],[99,67,80,54],[99,69,80,56],[100,10,80,58,"email"],[100,15,80,63],[101,10,80,65,"password"],[101,18,80,73],[102,10,80,75,"username"],[103,8,80,84],[103,9,80,85],[103,10,80,86],[104,8,81,6],[104,14,81,12],[105,10,81,14,"access_token"],[105,22,81,26],[106,10,81,28,"refresh_token"],[107,8,81,42],[107,9,81,43],[107,12,81,46,"response"],[107,20,81,54],[107,21,81,55,"data"],[107,25,81,59],[108,8,83,6],[108,14,83,12,"secureStorage"],[108,27,83,25],[108,28,83,26,"setItem"],[108,35,83,33],[108,36,83,34],[108,50,83,48],[108,52,83,50,"access_token"],[108,64,83,62],[108,65,83,63],[109,8,84,6],[109,14,84,12,"secureStorage"],[109,27,84,25],[109,28,84,26,"setItem"],[109,35,84,33],[109,36,84,34],[109,51,84,49],[109,53,84,51,"refresh_token"],[109,66,84,64],[109,67,84,65],[111,8,86,6],[112,8,87,6],[112,14,87,12,"userResponse"],[112,26,87,24],[112,29,87,27],[112,35,87,33,"api"],[112,45,87,36],[112,46,87,36,"api"],[112,49,87,36],[112,50,87,37,"get"],[112,53,87,40],[112,54,87,41],[112,64,87,51],[112,65,87,52],[113,8,88,6,"setUser"],[113,15,88,13],[113,16,88,14,"userResponse"],[113,28,88,26],[113,29,88,27,"data"],[113,33,88,31],[113,34,88,32],[114,6,89,4],[114,7,89,5],[114,8,89,6],[114,15,89,13,"error"],[114,20,89,23],[114,22,89,25],[115,8,90,6],[115,14,90,12],[115,18,90,16,"Error"],[115,23,90,21],[115,24,90,22,"error"],[115,29,90,27],[115,30,90,28,"response"],[115,38,90,36],[115,40,90,38,"data"],[115,44,90,42],[115,46,90,44,"detail"],[115,52,90,50],[115,56,90,54],[115,77,90,75],[115,78,90,76],[116,6,91,4],[117,4,92,2],[117,5,92,3],[118,4,94,2],[118,10,94,8,"logout"],[118,16,94,14],[118,19,94,17],[118,25,94,17,"logout"],[118,26,94,17],[118,31,94,29],[119,6,95,4],[119,10,95,8],[120,8,96,6],[120,14,96,12,"api"],[120,24,96,15],[120,25,96,15,"api"],[120,28,96,15],[120,29,96,16,"post"],[120,33,96,20],[120,34,96,21],[120,48,96,35],[120,49,96,36],[121,6,97,4],[121,7,97,5],[121,8,97,6],[121,15,97,13,"error"],[121,20,97,18],[121,22,97,20],[122,8,98,6,"console"],[122,15,98,13],[122,16,98,14,"log"],[122,19,98,17],[122,20,98,18],[122,35,98,33],[122,37,98,35,"error"],[122,42,98,40],[122,43,98,41],[123,6,99,4],[123,7,99,5],[123,16,99,14],[124,8,100,6],[124,14,100,12,"secureStorage"],[124,27,100,25],[124,28,100,26,"deleteItem"],[124,38,100,36],[124,39,100,37],[124,53,100,51],[124,54,100,52],[125,8,101,6],[125,14,101,12,"secureStorage"],[125,27,101,25],[125,28,101,26,"deleteItem"],[125,38,101,36],[125,39,101,37],[125,54,101,52],[125,55,101,53],[126,8,102,6,"setUser"],[126,15,102,13],[126,16,102,14],[126,20,102,18],[126,21,102,19],[127,6,103,4],[128,4,104,2],[128,5,104,3],[129,4,106,2],[129,10,106,8,"refreshUser"],[129,21,106,19],[129,24,106,22],[129,30,106,22,"refreshUser"],[129,31,106,22],[129,36,106,34],[130,6,107,4],[130,10,107,8],[131,8,108,6],[131,14,108,12,"response"],[131,22,108,20],[131,25,108,23],[131,31,108,29,"api"],[131,41,108,32],[131,42,108,32,"api"],[131,45,108,32],[131,46,108,33,"get"],[131,49,108,36],[131,50,108,37],[131,60,108,47],[131,61,108,48],[132,8,109,6,"setUser"],[132,15,109,13],[132,16,109,14,"response"],[132,24,109,22],[132,25,109,23,"data"],[132,29,109,27],[132,30,109,28],[133,6,110,4],[133,7,110,5],[133,8,110,6],[133,15,110,13,"error"],[133,20,110,18],[133,22,110,20],[134,8,111,6,"console"],[134,15,111,13],[134,16,111,14,"log"],[134,19,111,17],[134,20,111,18],[134,45,111,43],[134,47,111,45,"error"],[134,52,111,50],[134,53,111,51],[135,6,112,4],[136,4,113,2],[136,5,113,3],[137,4,115,2],[137,24,116,4],[137,28,116,4,"_reactJsxDevRuntime"],[137,47,116,4],[137,48,116,4,"jsxDEV"],[137,54,116,4],[137,56,116,5,"AuthContext"],[137,67,116,16],[137,68,116,17,"Provider"],[137,76,116,25],[138,6,116,26,"value"],[138,11,116,31],[138,13,116,33],[139,8,116,35,"user"],[139,12,116,39],[140,8,116,41,"loading"],[140,15,116,48],[141,8,116,50,"login"],[141,13,116,55],[142,8,116,57,"register"],[142,16,116,65],[143,8,116,67,"logout"],[143,14,116,73],[144,8,116,75,"refreshUser"],[145,6,116,87],[145,7,116,89],[146,6,116,89,"children"],[146,14,116,89],[146,16,117,7,"children"],[147,4,117,15],[148,6,117,15,"fileName"],[148,14,117,15],[148,16,117,15,"_jsxFileName"],[148,28,117,15],[149,6,117,15,"lineNumber"],[149,16,117,15],[150,6,117,15,"columnNumber"],[150,18,117,15],[151,4,117,15],[151,11,118,26],[151,12,118,27],[152,2,120,0],[152,3,120,1],[153,2,120,2,"_s"],[153,4,120,2],[153,5,24,13,"AuthProvider"],[153,17,24,25],[154,2,24,25,"_c"],[154,4,24,25],[154,7,24,13,"AuthProvider"],[154,19,24,25],[155,2,122,7],[155,8,122,13,"useAuth"],[155,15,122,20],[155,18,122,23,"useAuth"],[155,19,122,23],[155,24,122,29],[156,4,122,29,"_s2"],[156,7,122,29],[157,4,123,2],[157,10,123,8,"context"],[157,17,123,15],[157,20,123,18],[157,24,123,18,"useContext"],[157,30,123,28],[157,31,123,28,"useContext"],[157,41,123,28],[157,43,123,29,"AuthContext"],[157,54,123,40],[157,55,123,41],[158,4,124,2],[158,8,124,6,"context"],[158,15,124,13],[158,20,124,18,"undefined"],[158,29,124,27],[158,31,124,29],[159,6,125,4],[159,12,125,10],[159,16,125,14,"Error"],[159,21,125,19],[159,22,125,20],[159,67,125,65],[159,68,125,66],[160,4,126,2],[161,4,127,2],[161,11,127,9,"context"],[161,18,127,16],[162,2,128,0],[162,3,128,1],[163,2,128,2,"_s2"],[163,5,128,2],[163,6,122,13,"useAuth"],[163,13,122,20],[164,2,122,20],[164,6,122,20,"_c"],[164,8,122,20],[165,2,122,20,"$RefreshReg$"],[165,14,122,20],[165,15,122,20,"_c"],[165,17,122,20],[166,0,122,20],[166,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","login","register","logout","refreshUser","useAuth"],"mappings":"AAA;4BCuB;YCI;GDE;oBEE;GFc;gBGE;GH4B;mBIE;GJc;iBKE;GLU;sBME;GNO;CDO;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}