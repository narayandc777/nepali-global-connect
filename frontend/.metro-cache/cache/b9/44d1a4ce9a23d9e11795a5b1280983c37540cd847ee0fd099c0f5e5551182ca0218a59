{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../config/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":36,"index":126}}],"key":"V94urzZZSfzzXHrNxWFShT8IuQo=","exportNames":["*"],"imports":1}},{"name":"../utils/secureStorage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":127},"end":{"line":3,"column":56,"index":183}}],"key":"VJtuFUlbX461VIgg9agIAV15XNA=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/Users/narayandc/practice/nepali-global-connect/frontend/src/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _configApi = require(_dependencyMap[1], \"../config/api\");\n  var _utilsSecureStorage = require(_dependencyMap[2], \"../utils/secureStorage\");\n  var secureStorage = _interopNamespace(_utilsSecureStorage);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        const token = await secureStorage.getItem('access_token');\n        if (token) {\n          const response = await _configApi.api.get('/auth/me');\n          setUser(response.data);\n        }\n      } catch (error) {\n        console.log('Not authenticated');\n        await secureStorage.deleteItem('access_token');\n        await secureStorage.deleteItem('refresh_token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await _configApi.api.post('/auth/login', {\n          email,\n          password\n        });\n        const {\n          access_token,\n          refresh_token\n        } = response.data;\n        await secureStorage.setItem('access_token', access_token);\n        await secureStorage.setItem('refresh_token', refresh_token);\n\n        // Get user info\n        const userResponse = await _configApi.api.get('/auth/me');\n        setUser(userResponse.data);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async (email, password, username) => {\n      try {\n        const response = await _configApi.api.post('/auth/register', {\n          email,\n          password,\n          username\n        });\n        const {\n          access_token,\n          refresh_token\n        } = response.data;\n        await secureStorage.setItem('access_token', access_token);\n        await secureStorage.setItem('refresh_token', refresh_token);\n\n        // Get user info\n        const userResponse = await _configApi.api.get('/auth/me');\n        setUser(userResponse.data);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      try {\n        await _configApi.api.post('/auth/logout');\n      } catch (error) {\n        console.log('Logout error:', error);\n      } finally {\n        await secureStorage.deleteItem('access_token');\n        await secureStorage.deleteItem('refresh_token');\n        setUser(null);\n      }\n    };\n    const refreshUser = async () => {\n      try {\n        const response = await _configApi.api.get('/auth/me');\n        setUser(response.data);\n      } catch (error) {\n        console.log('Failed to refresh user:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        login,\n        register,\n        logout,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"NiO5z6JIqzX62LS5UWDgIqbZYyY=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":156,"map":[[25,2,24,0,"Object"],[25,8,24,0],[25,9,24,0,"defineProperty"],[25,23,24,0],[25,24,24,0,"exports"],[25,31,24,0],[26,4,24,0,"enumerable"],[26,14,24,0],[27,4,24,0,"get"],[27,7,24,0],[27,18,24,0,"get"],[27,19,24,0],[28,6,24,0],[28,13,24,0,"AuthProvider"],[28,25,24,0],[29,4,24,0],[30,2,24,0],[31,2,108,0,"Object"],[31,8,108,0],[31,9,108,0,"defineProperty"],[31,23,108,0],[31,24,108,0,"exports"],[31,31,108,0],[32,4,108,0,"enumerable"],[32,14,108,0],[33,4,108,0,"get"],[33,7,108,0],[33,18,108,0,"get"],[33,19,108,0],[34,6,108,0],[34,13,108,0,"useAuth"],[34,20,108,0],[35,4,108,0],[36,2,108,0],[37,2,1,0],[37,6,1,0,"_react"],[37,12,1,0],[37,15,1,0,"require"],[37,22,1,0],[37,23,1,0,"_dependencyMap"],[37,37,1,0],[38,2,2,0],[38,6,2,0,"_configApi"],[38,16,2,0],[38,19,2,0,"require"],[38,26,2,0],[38,27,2,0,"_dependencyMap"],[38,41,2,0],[39,2,3,0],[39,6,3,0,"_utilsSecureStorage"],[39,25,3,0],[39,28,3,0,"require"],[39,35,3,0],[39,36,3,0,"_dependencyMap"],[39,50,3,0],[40,2,3,0],[40,6,3,0,"secureStorage"],[40,19,3,0],[40,22,3,0,"_interopNamespace"],[40,39,3,0],[40,40,3,0,"_utilsSecureStorage"],[40,59,3,0],[41,2,3,56],[41,6,3,56,"_reactJsxDevRuntime"],[41,25,3,56],[41,28,3,56,"require"],[41,35,3,56],[41,36,3,56,"_dependencyMap"],[41,50,3,56],[42,2,22,0],[42,8,22,6,"AuthContext"],[42,19,22,17],[42,35,22,20],[42,39,22,20,"createContext"],[42,45,22,33],[42,46,22,33,"createContext"],[42,59,22,33],[42,61,22,63,"undefined"],[42,70,22,72],[42,71,22,73],[43,2,24,7],[43,8,24,13,"AuthProvider"],[43,20,24,25],[43,23,24,28,"AuthProvider"],[43,24,24,29],[44,4,24,31,"children"],[45,2,24,65],[45,3,24,66],[45,8,24,71],[46,4,24,71,"_s"],[46,6,24,71],[47,4,25,2],[47,10,25,8],[47,11,25,9,"user"],[47,15,25,13],[47,17,25,15,"setUser"],[47,24,25,22],[47,25,25,23],[47,28,25,26],[47,32,25,26,"useState"],[47,38,25,34],[47,39,25,34,"useState"],[47,47,25,34],[47,49,25,48],[47,53,25,52],[47,54,25,53],[48,4,26,2],[48,10,26,8],[48,11,26,9,"loading"],[48,18,26,16],[48,20,26,18,"setLoading"],[48,30,26,28],[48,31,26,29],[48,34,26,32],[48,38,26,32,"useState"],[48,44,26,40],[48,45,26,40,"useState"],[48,53,26,40],[48,55,26,41],[48,59,26,45],[48,60,26,46],[49,4,28,2],[49,8,28,2,"useEffect"],[49,14,28,11],[49,15,28,11,"useEffect"],[49,24,28,11],[49,26,28,12],[49,32,28,18],[50,6,29,4,"checkAuth"],[50,15,29,13],[50,16,29,14],[50,17,29,15],[51,4,30,2],[51,5,30,3],[51,7,30,5],[51,9,30,7],[51,10,30,8],[52,4,32,2],[52,10,32,8,"checkAuth"],[52,19,32,17],[52,22,32,20],[52,28,32,20,"checkAuth"],[52,29,32,20],[52,34,32,32],[53,6,33,4],[53,10,33,8],[54,8,34,6],[54,14,34,12,"token"],[54,19,34,17],[54,22,34,20],[54,28,34,26,"secureStorage"],[54,41,34,39],[54,42,34,40,"getItem"],[54,49,34,47],[54,50,34,48],[54,64,34,62],[54,65,34,63],[55,8,35,6],[55,12,35,10,"token"],[55,17,35,15],[55,19,35,17],[56,10,36,8],[56,16,36,14,"response"],[56,24,36,22],[56,27,36,25],[56,33,36,31,"api"],[56,43,36,34],[56,44,36,34,"api"],[56,47,36,34],[56,48,36,35,"get"],[56,51,36,38],[56,52,36,39],[56,62,36,49],[56,63,36,50],[57,10,37,8,"setUser"],[57,17,37,15],[57,18,37,16,"response"],[57,26,37,24],[57,27,37,25,"data"],[57,31,37,29],[57,32,37,30],[58,8,38,6],[59,6,39,4],[59,7,39,5],[59,8,39,6],[59,15,39,13,"error"],[59,20,39,18],[59,22,39,20],[60,8,40,6,"console"],[60,15,40,13],[60,16,40,14,"log"],[60,19,40,17],[60,20,40,18],[60,39,40,37],[60,40,40,38],[61,8,41,6],[61,14,41,12,"secureStorage"],[61,27,41,25],[61,28,41,26,"deleteItem"],[61,38,41,36],[61,39,41,37],[61,53,41,51],[61,54,41,52],[62,8,42,6],[62,14,42,12,"secureStorage"],[62,27,42,25],[62,28,42,26,"deleteItem"],[62,38,42,36],[62,39,42,37],[62,54,42,52],[62,55,42,53],[63,6,43,4],[63,7,43,5],[63,16,43,14],[64,8,44,6,"setLoading"],[64,18,44,16],[64,19,44,17],[64,24,44,22],[64,25,44,23],[65,6,45,4],[66,4,46,2],[66,5,46,3],[67,4,48,2],[67,10,48,8,"login"],[67,15,48,13],[67,18,48,16],[67,24,48,16,"login"],[67,25,48,23,"email"],[67,30,48,36],[67,32,48,38,"password"],[67,40,48,54],[67,45,48,59],[68,6,49,4],[68,10,49,8],[69,8,50,6],[69,14,50,12,"response"],[69,22,50,20],[69,25,50,23],[69,31,50,29,"api"],[69,41,50,32],[69,42,50,32,"api"],[69,45,50,32],[69,46,50,33,"post"],[69,50,50,37],[69,51,50,38],[69,64,50,51],[69,66,50,53],[70,10,50,55,"email"],[70,15,50,60],[71,10,50,62,"password"],[72,8,50,71],[72,9,50,72],[72,10,50,73],[73,8,51,6],[73,14,51,12],[74,10,51,14,"access_token"],[74,22,51,26],[75,10,51,28,"refresh_token"],[76,8,51,42],[76,9,51,43],[76,12,51,46,"response"],[76,20,51,54],[76,21,51,55,"data"],[76,25,51,59],[77,8,53,6],[77,14,53,12,"secureStorage"],[77,27,53,25],[77,28,53,26,"setItem"],[77,35,53,33],[77,36,53,34],[77,50,53,48],[77,52,53,50,"access_token"],[77,64,53,62],[77,65,53,63],[78,8,54,6],[78,14,54,12,"secureStorage"],[78,27,54,25],[78,28,54,26,"setItem"],[78,35,54,33],[78,36,54,34],[78,51,54,49],[78,53,54,51,"refresh_token"],[78,66,54,64],[78,67,54,65],[80,8,56,6],[81,8,57,6],[81,14,57,12,"userResponse"],[81,26,57,24],[81,29,57,27],[81,35,57,33,"api"],[81,45,57,36],[81,46,57,36,"api"],[81,49,57,36],[81,50,57,37,"get"],[81,53,57,40],[81,54,57,41],[81,64,57,51],[81,65,57,52],[82,8,58,6,"setUser"],[82,15,58,13],[82,16,58,14,"userResponse"],[82,28,58,26],[82,29,58,27,"data"],[82,33,58,31],[82,34,58,32],[83,6,59,4],[83,7,59,5],[83,8,59,6],[83,15,59,13,"error"],[83,20,59,23],[83,22,59,25],[84,8,60,6],[84,14,60,12],[84,18,60,16,"Error"],[84,23,60,21],[84,24,60,22,"error"],[84,29,60,27],[84,30,60,28,"response"],[84,38,60,36],[84,40,60,38,"data"],[84,44,60,42],[84,46,60,44,"detail"],[84,52,60,50],[84,56,60,54],[84,70,60,68],[84,71,60,69],[85,6,61,4],[86,4,62,2],[86,5,62,3],[87,4,64,2],[87,10,64,8,"register"],[87,18,64,16],[87,21,64,19],[87,27,64,19,"register"],[87,28,64,26,"email"],[87,33,64,39],[87,35,64,41,"password"],[87,43,64,57],[87,45,64,59,"username"],[87,53,64,75],[87,58,64,80],[88,6,65,4],[88,10,65,8],[89,8,66,6],[89,14,66,12,"response"],[89,22,66,20],[89,25,66,23],[89,31,66,29,"api"],[89,41,66,32],[89,42,66,32,"api"],[89,45,66,32],[89,46,66,33,"post"],[89,50,66,37],[89,51,66,38],[89,67,66,54],[89,69,66,56],[90,10,66,58,"email"],[90,15,66,63],[91,10,66,65,"password"],[91,18,66,73],[92,10,66,75,"username"],[93,8,66,84],[93,9,66,85],[93,10,66,86],[94,8,67,6],[94,14,67,12],[95,10,67,14,"access_token"],[95,22,67,26],[96,10,67,28,"refresh_token"],[97,8,67,42],[97,9,67,43],[97,12,67,46,"response"],[97,20,67,54],[97,21,67,55,"data"],[97,25,67,59],[98,8,69,6],[98,14,69,12,"secureStorage"],[98,27,69,25],[98,28,69,26,"setItem"],[98,35,69,33],[98,36,69,34],[98,50,69,48],[98,52,69,50,"access_token"],[98,64,69,62],[98,65,69,63],[99,8,70,6],[99,14,70,12,"secureStorage"],[99,27,70,25],[99,28,70,26,"setItem"],[99,35,70,33],[99,36,70,34],[99,51,70,49],[99,53,70,51,"refresh_token"],[99,66,70,64],[99,67,70,65],[101,8,72,6],[102,8,73,6],[102,14,73,12,"userResponse"],[102,26,73,24],[102,29,73,27],[102,35,73,33,"api"],[102,45,73,36],[102,46,73,36,"api"],[102,49,73,36],[102,50,73,37,"get"],[102,53,73,40],[102,54,73,41],[102,64,73,51],[102,65,73,52],[103,8,74,6,"setUser"],[103,15,74,13],[103,16,74,14,"userResponse"],[103,28,74,26],[103,29,74,27,"data"],[103,33,74,31],[103,34,74,32],[104,6,75,4],[104,7,75,5],[104,8,75,6],[104,15,75,13,"error"],[104,20,75,23],[104,22,75,25],[105,8,76,6],[105,14,76,12],[105,18,76,16,"Error"],[105,23,76,21],[105,24,76,22,"error"],[105,29,76,27],[105,30,76,28,"response"],[105,38,76,36],[105,40,76,38,"data"],[105,44,76,42],[105,46,76,44,"detail"],[105,52,76,50],[105,56,76,54],[105,77,76,75],[105,78,76,76],[106,6,77,4],[107,4,78,2],[107,5,78,3],[108,4,80,2],[108,10,80,8,"logout"],[108,16,80,14],[108,19,80,17],[108,25,80,17,"logout"],[108,26,80,17],[108,31,80,29],[109,6,81,4],[109,10,81,8],[110,8,82,6],[110,14,82,12,"api"],[110,24,82,15],[110,25,82,15,"api"],[110,28,82,15],[110,29,82,16,"post"],[110,33,82,20],[110,34,82,21],[110,48,82,35],[110,49,82,36],[111,6,83,4],[111,7,83,5],[111,8,83,6],[111,15,83,13,"error"],[111,20,83,18],[111,22,83,20],[112,8,84,6,"console"],[112,15,84,13],[112,16,84,14,"log"],[112,19,84,17],[112,20,84,18],[112,35,84,33],[112,37,84,35,"error"],[112,42,84,40],[112,43,84,41],[113,6,85,4],[113,7,85,5],[113,16,85,14],[114,8,86,6],[114,14,86,12,"secureStorage"],[114,27,86,25],[114,28,86,26,"deleteItem"],[114,38,86,36],[114,39,86,37],[114,53,86,51],[114,54,86,52],[115,8,87,6],[115,14,87,12,"secureStorage"],[115,27,87,25],[115,28,87,26,"deleteItem"],[115,38,87,36],[115,39,87,37],[115,54,87,52],[115,55,87,53],[116,8,88,6,"setUser"],[116,15,88,13],[116,16,88,14],[116,20,88,18],[116,21,88,19],[117,6,89,4],[118,4,90,2],[118,5,90,3],[119,4,92,2],[119,10,92,8,"refreshUser"],[119,21,92,19],[119,24,92,22],[119,30,92,22,"refreshUser"],[119,31,92,22],[119,36,92,34],[120,6,93,4],[120,10,93,8],[121,8,94,6],[121,14,94,12,"response"],[121,22,94,20],[121,25,94,23],[121,31,94,29,"api"],[121,41,94,32],[121,42,94,32,"api"],[121,45,94,32],[121,46,94,33,"get"],[121,49,94,36],[121,50,94,37],[121,60,94,47],[121,61,94,48],[122,8,95,6,"setUser"],[122,15,95,13],[122,16,95,14,"response"],[122,24,95,22],[122,25,95,23,"data"],[122,29,95,27],[122,30,95,28],[123,6,96,4],[123,7,96,5],[123,8,96,6],[123,15,96,13,"error"],[123,20,96,18],[123,22,96,20],[124,8,97,6,"console"],[124,15,97,13],[124,16,97,14,"log"],[124,19,97,17],[124,20,97,18],[124,45,97,43],[124,47,97,45,"error"],[124,52,97,50],[124,53,97,51],[125,6,98,4],[126,4,99,2],[126,5,99,3],[127,4,101,2],[127,24,102,4],[127,28,102,4,"_reactJsxDevRuntime"],[127,47,102,4],[127,48,102,4,"jsxDEV"],[127,54,102,4],[127,56,102,5,"AuthContext"],[127,67,102,16],[127,68,102,17,"Provider"],[127,76,102,25],[128,6,102,26,"value"],[128,11,102,31],[128,13,102,33],[129,8,102,35,"user"],[129,12,102,39],[130,8,102,41,"loading"],[130,15,102,48],[131,8,102,50,"login"],[131,13,102,55],[132,8,102,57,"register"],[132,16,102,65],[133,8,102,67,"logout"],[133,14,102,73],[134,8,102,75,"refreshUser"],[135,6,102,87],[135,7,102,89],[136,6,102,89,"children"],[136,14,102,89],[136,16,103,7,"children"],[137,4,103,15],[138,6,103,15,"fileName"],[138,14,103,15],[138,16,103,15,"_jsxFileName"],[138,28,103,15],[139,6,103,15,"lineNumber"],[139,16,103,15],[140,6,103,15,"columnNumber"],[140,18,103,15],[141,4,103,15],[141,11,104,26],[141,12,104,27],[142,2,106,0],[142,3,106,1],[143,2,106,2,"_s"],[143,4,106,2],[143,5,24,13,"AuthProvider"],[143,17,24,25],[144,2,24,25,"_c"],[144,4,24,25],[144,7,24,13,"AuthProvider"],[144,19,24,25],[145,2,108,7],[145,8,108,13,"useAuth"],[145,15,108,20],[145,18,108,23,"useAuth"],[145,19,108,23],[145,24,108,29],[146,4,108,29,"_s2"],[146,7,108,29],[147,4,109,2],[147,10,109,8,"context"],[147,17,109,15],[147,20,109,18],[147,24,109,18,"useContext"],[147,30,109,28],[147,31,109,28,"useContext"],[147,41,109,28],[147,43,109,29,"AuthContext"],[147,54,109,40],[147,55,109,41],[148,4,110,2],[148,8,110,6,"context"],[148,15,110,13],[148,20,110,18,"undefined"],[148,29,110,27],[148,31,110,29],[149,6,111,4],[149,12,111,10],[149,16,111,14,"Error"],[149,21,111,19],[149,22,111,20],[149,67,111,65],[149,68,111,66],[150,4,112,2],[151,4,113,2],[151,11,113,9,"context"],[151,18,113,16],[152,2,114,0],[152,3,114,1],[153,2,114,2,"_s2"],[153,5,114,2],[153,6,108,13,"useAuth"],[153,13,108,20],[154,2,108,20],[154,6,108,20,"_c"],[154,8,108,20],[155,2,108,20,"$RefreshReg$"],[155,14,108,20],[155,15,108,20,"_c"],[155,17,108,20],[156,0,108,20],[156,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","login","register","logout","refreshUser","useAuth"],"mappings":"AAA;4BCuB;YCI;GDE;oBEE;GFc;gBGE;GHc;mBIE;GJc;iBKE;GLU;sBME;GNO;CDO;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}